<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carfify - Komplette Auto-Diagnose & Werkstattsuche</title>
    <meta name="description" content="Umfassende Fahrzeugdiagnose mit L√∂sungswegen und Werkstattsuche">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#007bff">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .diagnose-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .category-card {
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .category-card:hover {
            border-color: #007bff;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,123,255,0.2);
        }
        
        .category-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }
        
        .question-section {
            margin: 30px 0;
        }
        
        .question-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }
        
        .answer-options {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .answer-btn {
            flex: 1;
            padding: 10px 20px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .answer-btn:hover {
            background: #007bff;
            color: white;
        }
        
        .answer-btn.selected {
            background: #007bff;
            color: white;
        }
        
        .solution-tabs {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        .tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: #f0f0f0;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            font-size: 1rem;
        }
        
        .tab-btn.active {
            background: #007bff;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 8px;
            margin-top: 10px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .workshop-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .workshop-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            cursor: pointer;
            transition: transform 0.2s;
            background: white;
        }
        
        .workshop-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 5% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        .search-controls {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .search-controls label {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .search-controls select {
            padding: 8px;
            border-radius: 5px;
            border: 1px solid #ddd;
        }
        
        .btn-primary, .btn-secondary {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            text-decoration: none;
            display: inline-block;
        }
        
        .btn-primary {
            background: #007bff;
            color: white;
        }
        
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        
        @media (max-width: 768px) {
            .solution-tabs {
                flex-direction: column;
            }
            
            .search-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöó Carfify</h1>
            <p>Intelligente Fahrzeugdiagnose mit L√∂sungswegen</p>
        </div>
        
        <div class="diagnose-container">
            <h2>üîß Fahrzeugdiagnose</h2>
            <p>W√§hlen Sie eine Kategorie f√ºr die Fehlerdiagnose:</p>
            
            <div class="category-grid">
                <div class="category-card" data-category="motor">
                    <div class="category-icon">üîß</div>
                    <h3>Motor</h3>
                    <p>Motorprobleme, Leistungsverlust, merkw√ºrdige Ger√§usche</p>
                </div>
                
                <div class="category-card" data-category="brakes">
                    <div class="category-icon">üõë</div>
                    <h3>Bremsen</h3>
                    <p>Bremsprobleme, quietschende Bremsen, l√§ngerer Bremsweg</p>
                </div>
                
                <div class="category-card" data-category="suspension">
                    <div class="category-icon">‚öôÔ∏è</div>
                    <h3>Fahrwerk</h3>
                    <p>Unebenheiten, Vibrationen, schlechte Stra√üenlage</p>
                </div>
                
                <div class="category-card" data-category="electronics">
                    <div class="category-icon">üí°</div>
                    <h3>Elektronik</h3>
                    <p>Warnleuchten, elektrische Fehler, Startprobleme</p>
                </div>
            </div>
            
            <div id="question-section" class="question-section" style="display: none;">
                <h3 id="question-title"></h3>
                <div id="questions-container"></div>
                <button id="submit-diagnosis" class="btn-primary" style="display: none; margin-top: 20px;">Diagnose abschlie√üen</button>
            </div>
            
            <div id="diagnosis-result" class="result-section" style="display: none;">
                <h3>üí° L√∂sungswege</h3>
                <div class="solution-tabs">
                    <button class="tab-btn active" data-tab="self">üîß Selbst reparieren</button>
                    <button class="tab-btn" data-tab="hybrid">‚öôÔ∏è Hybrid-L√∂sung</button>
                    <button class="tab-btn" data-tab="workshop">üè≠ Werkstatt</button>
                </div>
                
                <div id="tab-self" class="tab-content active">
                    <h4>Anleitung zur Selbstreparatur</h4>
                    <div class="solution-steps" id="self-solution"></div>
                </div>
                
                <div id="tab-hybrid" class="tab-content">
                    <h4>Kombinierte L√∂sung</h4>
                    <div class="solution-steps" id="hybrid-solution"></div>
                </div>
                
                <div id="tab-workshop" class="tab-content">
                    <h4>Finde eine Werkstatt in deiner N√§he</h4>
                    <div class="workshop-search">
                        <div class="search-controls">
                            <label>Umkreis: 
                                <select id="radius-filter">
                                    <option value="5">5 km</option>
                                    <option value="10" selected>10 km</option>
                                    <option value="25">25 km</option>
                                    <option value="50">50 km</option>
                                </select>
                            </label>
                            <label>Sortierung:
                                <select id="sort-filter">
                                    <option value="distance">Entfernung</option>
                                    <option value="rating">Bewertung</option>
                                    <option value="price">Preis</option>
                                </select>
                            </label>
                        </div>
                        <div id="workshop-list" class="workshop-grid"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Workshop Detail Modal -->
    <div id="workshop-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="workshop-details"></div>
        </div>
    </div>

    <script>
        // Komplette JavaScript-Logik
        let currentCategory = '';
        let currentQuestionIndex = 0;
        let answers = [];
        
        const questions = {
            motor: [
                "Startet der Motor schlecht oder gar nicht?",
                "Macht der Motor ungew√∂hnliche Ger√§usche?",
                "Hat das Fahrzeug Leistungsverlust?",
                "Blinkt die Motor-Kontrollleuchte?",
                "Verbraucht das Fahrzeug mehr √ñl als gew√∂hnlich?"
            ],
            brakes: [
                "Bremsen die R√§der schlecht oder ungleichm√§√üig?",
                "H√∂ren Sie quietschende oder schleifende Ger√§usche?",
                "Ist der Bremsweg deutlich l√§nger geworden?",
                "Zieht das Fahrzeug beim Bremsen zur Seite?",
                "Ist die Bremspedal-H√§rte ungew√∂hnlich?"
            ],
            suspension: [
                "Sp√ºren Sie starke Unebenheiten oder Vibrationen?",
                "Ist die Stra√üenlage verschlechtert?",
                "Neigt sich das Fahrzeug in Kurven stark?",
                "H√∂rt sich ein Klopfen oder Knarzen?",
                "Ist die Reifenabnutzung ungleichm√§√üig?"
            ],
            electronics: [
                "Leuchten Warnleuchten auf dem Armaturenbrett?",
                "Funktionieren alle elektrischen Verbraucher?",
                "Startet das Fahrzeug zuverl√§ssig?",
                "Gibt es Probleme mit Licht oder Blinkern?",
                "F√§llt die Lichtmaschine aus?"
            ]
        };
        
        // Event-Listener f√ºr Kategorien
        document.querySelectorAll('.category-card').forEach(card => {
            card.addEventListener('click', () => {
                currentCategory = card.dataset.category;
                startDiagnosis();
            });
        });
        
        function startDiagnosis() {
            document.querySelector('.category-grid').style.display = 'none';
            document.getElementById('question-section').style.display = 'block';
            
            const categoryNames = {
                motor: 'Motor',
                brakes: 'Bremsen',
                suspension: 'Fahrwerk',
                electronics: 'Elektronik'
            };
            
            document.getElementById('question-title').textContent = 
                `${categoryNames[currentCategory]} - Diagnose`;
            
            loadQuestion();
        }
        
        function loadQuestion() {
            const container = document.getElementById('questions-container');
            container.innerHTML = '';
            
            const questionDiv = document.createElement('div');
            questionDiv.className = 'question-card';
            questionDiv.innerHTML = `
                <p>${questions[currentCategory][currentQuestionIndex]}</p>
                <div class="answer-options">
                    <button class="answer-btn" onclick="selectAnswer('yes')">Ja</button>
                    <button class="answer-btn" onclick="selectAnswer('no')">Nein</button>
                    <button class="answer-btn" onclick="selectAnswer('unknown')">Wei√ü nicht</button>
                </div>
            `;
            
            container.appendChild(questionDiv);
        }
        
        function selectAnswer(answer) {
            answers.push(answer);
            
            if (currentQuestionIndex < questions[currentCategory].length - 1) {
                currentQuestionIndex++;
                loadQuestion();
            } else {
                showResult();
            }
        }
        
        function showResult() {
            document.getElementById('question-section').style.display = 'none';
            
            const yesCount = answers.filter(a => a === 'yes').length;
            const unknownCount = answers.filter(a => a === 'unknown').length;
            
            let severity = 'low';
            let severityText = 'Geringe Auspr√§gung';
            let recommendations = [];
            
            if (yesCount >= 3) {
                severity = 'high';
                severityText = 'Hohe Auspr√§gung - Werkstattbesuch empfohlen';
            } else if (yesCount >= 1) {
                severity = 'medium';
                severityText = 'Mittlere Auspr√§gung - Beobachtung empfohlen';
            }
            
            const categoryNames = {
                motor: 'Motor',
                brakes: 'Bremsen',
                suspension: 'Fahrwerk',
                electronics: 'Elektronik'
            };
            
            // Empfehlungen basierend auf Kategorie
            const categoryRecommendations = {
                motor: [
                    'Motor√∂l pr√ºfen und ggf. wechseln',
                    'Luftfilter kontrollieren',
                    'Fehlercodes auslesen lassen'
                ],
                brakes: [
                    'Bremsfl√ºssigkeit pr√ºfen',
                    'Bremsbel√§ge kontrollieren',
                    'Bremsanlage professionell pr√ºfen lassen'
                ],
                suspension: [
                    'Reifendruck kontrollieren',
                    'Sto√üd√§mpfer pr√ºfen',
                    'Achsvermessung durchf√ºhren lassen'
                ],
                electronics: [
                    'Batterie pr√ºfen',
                    'Sicherungen kontrollieren',
                    'Elektronische Diagnose durchf√ºhren lassen'
                ]
            };
            
            recommendations = categoryRecommendations[currentCategory];
            
            const resultText = `
                <div class="result-card ${severity}">
                    <h4>${categoryNames[currentCategory]} - ${severityText}</h4>
                    <p><strong>Erkannte Probleme:</strong> ${yesCount} von 5 Fragen mit "Ja" beantwortet</p>
                    <p><strong>Empfohlene Ma√ünahmen:</strong></p>
                    <ul>${recommendations.map(r => `<li>${r}</li>`).join('')}</ul>
                </div>
            `;
            
            document.getElementById('diagnosis-result').insertAdjacentHTML('afterbegin', resultText);
            document.getElementById('diagnosis-result').style.display = 'block';
            
            generateSolutions(currentCategory, severity, recommendations);
            loadWorkshops();
        }
        
        function generateSolutions(category, severity, recommendations) {
            const selfSolution = document.getElementById('self-solution');
            const hybridSolution = document.getElementById('hybrid-solution');
            
            const selfGuides = {
                motor: [
                    "1. Motor√∂l pr√ºfen und ggf. nachf√ºllen",
                    "2. Luftfilter kontrollieren und evtl. wechseln",
                    "3. Z√ºndkerzen √ºberpr√ºfen",
                    "4. K√ºhlfl√ºssigkeit checken",
                    "5. Bei Unsicherheit: Fehlercodes auslesen"
                ],
                brakes: [
                    "1. Bremsfl√ºssigkeit pr√ºfen",
                    "2. Bremsbelag-Dicke kontrollieren",
                    "3. Bremsscheiben auf Risse pr√ºfen",
                    "4. Handbremse testen",
                    "5. Bei Ger√§uschen: sofort Werkstatt aufsuchen"
                ],
                suspension: [
                    "1. Reifendruck kontrollieren",
                    "2. Auf Unebenheiten achten",
                    "3. Sto√üd√§mpfer visuell pr√ºfen",
                    "4. Radlager testen",
                    "5. Achsvermessung bei Problemen"
                ],
                electronics: [
                    "1. Sicherungen pr√ºfen",
                    "2. Batterie-Pole reinigen",
                    "3. Kabelverbindungen kontrollieren",
                    "4. Fehlercodes mit OBD2-Reader auslesen",
                    "5. Bei komplexen Fehlern: Fachbetrieb aufsuchen"
                ]
            };
            
            selfSolution.innerHTML = `
                <div class="solution-box">
                    <h5>Schritt-f√ºr-Schritt Anleitung:</h5>
                    <ol>
                        ${selfGuides[category].map(step => `<li>${step}</li>`).join('')}
                    </ol>
                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin-top: 15px;">
                        <strong>Achtung:</strong> Bei Unsicherheit immer einen Fachbetrieb konsultieren!
                    </div>
                </div>
            `;
            
            hybridSolution.innerHTML = `
                <div class="solution-box">
                    <h5>Kombinierte L√∂sung:</h5>
                    <ul>
                        <li><strong>Erste Diagnose:</strong> Selbst durchf√ºhren mit unserem Guide</li>
                        <li><strong>Ersatzteile:</strong> Online bestellen (bis zu 40% sparen)</li>
                        <li><strong>Montage:</strong> In Partner-Werkstatt oder selbst</li>
                        <li><strong>Kosten:</strong> ca. 50% g√ºnstiger als reine Werkstattl√∂sung</li>
                    </ul>
                    <button class="btn-primary" onclick="showWorkshopTab()" style="margin-top: 15px;">Partner-Werkst√§tten finden</button>
                </div>
            `;
        }
        
        // Tab-Wechsel
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const tabName = e.target.dataset.tab;
                
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                e.target.classList.add('active');
                document.getElementById(`tab-${tabName}`).classList.add('active');
            });
        });
        
        function showWorkshopTab() {
            document.querySelector('[data-tab="workshop"]').click();
        }
        
        const workshops = [
            {
                name: "AutoService M√ºller",
                address: "Hauptstra√üe 45, 10115 Berlin",
                phone: "030 12345678",
                rating: 4.8,
                reviews: 124,
                distance: 2.3,
                price: "‚Ç¨‚Ç¨",
                specialties: ["Motor", "Bremsen", "Elektronik"],
                hours: "Mo-Fr 8-18 Uhr, Sa 9-14 Uhr"
            },
            {
                name: "Kfz-Meisterbetrieb Schmidt",
                address: "Bahnhofstra√üe 12, 10117 Berlin",
                phone: "030 87654321",
                rating: 4.6,
                reviews: 89,
                distance: 5.7,
                price: "‚Ç¨‚Ç¨‚Ç¨",
                specialties: ["Fahrwerk", "Bremsen", "T√úV"],
                hours: "Mo-Fr 7-19 Uhr, Sa 8-16 Uhr"
            },
            {
                name: "QuickFix Autowerkstatt",
                address: "Potsdamer Platz 1, 10785 Berlin",
                phone: "030 5557890",
                rating: 4.4,
                reviews: 256,
                distance: 8.2,
                price: "‚Ç¨",
                specialties: ["√ñlwechsel", "Inspektion", "Reifen"],
                hours: "Mo-Sa 8-20 Uhr"
            },
            {
                name: "Premium Car Care",
                address: "Kurf√ºrstendamm 200, 10719 Berlin",
                phone: "030 9998877",
                rating: 4.9,
                reviews: 67,
                distance: 12.5,
                price: "‚Ç¨‚Ç¨‚Ç¨‚Ç¨",
                specialties: ["Elektronik", "Diagnose", "Premium-Fahrzeuge"],
                hours: "Mo-Fr 8-18 Uhr"
            },
            {
                name: "SpeedService Berlin",
                address: "Alexanderplatz 5, 10178 Berlin",
                phone: "030 7776665",
                rating: 4.5,
                reviews: 198,
                distance: 15.8,
                price: "‚Ç¨‚Ç¨",
                specialties: ["Motor", "Getriebe", "Abgasanlage"],
                hours: "Mo-Fr 7-19 Uhr, Sa 9-15 Uhr"
            }
        ];
        
        function loadWorkshops() {
            const workshopList = document.getElementById('workshop-list');
            const radius = parseInt(document.getElementById('radius-filter').value);
            const sortBy = document.getElementById('sort-filter').value;
            
            let filteredWorkshops = workshops.filter(w => w.distance <= radius);
            
            filteredWorkshops.sort((a, b) => {
                switch(sortBy) {
                    case 'distance': return a.distance - b.distance;
                    case 'rating': return b.rating - a.rating;
                    case 'price': return a.price.length - b.price.length;
                    default: return 0;
                }
            });
            
            workshopList.innerHTML = filteredWorkshops.map(workshop => `
                <div class="workshop-card" onclick="showWorkshopDetails('${workshop.name}')">
                    <h4>${workshop.name}</h4>
                    <p>üìç ${workshop.address}</p>
                    <p>‚≠ê ${workshop.rating}/5 (${workshop.reviews} Bewertungen)</p>
                    <p>üìè ${workshop.distance} km entfernt</p>
                    <p>üí∞ ${workshop.price}</p>
                    <p>üîß ${workshop.specialties.join(', ')}</p>
                </div>
            `).join('');
        }
        
        document.getElementById('radius-filter').addEventListener('change', loadWorkshops);
        document.getElementById('sort-filter').addEventListener('change', loadWorkshops);
        
        function showWorkshopDetails(workshopName) {
            const workshop = workshops.find(w => w.name === workshopName);
            const modal = document.getElementById('workshop-modal');
            const details = document.getElementById('workshop-details');
            
            details.innerHTML = `
                <h2>${workshop.name}</h2>
                <div class="workshop-info">
                    <p><strong>Adresse:</strong> ${workshop.address}</p>
                    <p><strong>Telefon:</strong> <a href="tel:${workshop.phone}" style="color: #007bff;">${workshop.phone}</a></p>
                    <p><strong>√ñffnungszeiten:</strong> ${workshop.hours}</p>
                    <p><strong>Bewertung:</strong> ‚≠ê ${workshop.rating}/5 (${workshop.reviews} Bewertungen)</p>
                    <p><strong>Entfernung:</strong> ${workshop.distance} km</p>
                    <p><strong>Preisklasse:</strong> ${workshop.price}</p>
                    <p><strong>Spezialisierungen:</strong> ${workshop.specialties.join(', ')}</p>
                    
                    <div style="margin-top: 20px;">
                        <button class="btn-primary" onclick="callWorkshop('${workshop.phone}')">Anrufen</button>
                        <button class="btn-secondary" onclick="openMaps('${workshop.address}')">Route planen</button>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        function callWorkshop(phone) {
            window.location.href = `tel:${phone}`;
        }
        
        function openMaps(address) {
            const encodedAddress = encodeURIComponent(address);
            window.open(`https://www.google.com/maps/search/?api=1&query=${encodedAddress}`, '_blank');
        }
        
        document.querySelector('.close').addEventListener('click', () => {
            document.getElementById('workshop-modal').style.display = 'none';
        });
        
        window.addEventListener('click', (e) => {
            const modal = document.getElementById('workshop-modal');
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    </script>
</body>
</html>